"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[4891],{49935:function(t,e,s){s.d(e,{K:function(){return r},N:function(){return l}});var i=s(81580),a=s(73435),n=s(24330),o=s.n(n);s(5479);const r=async({$button:t,request:e,onSuccess:s,onFinished:n,onError:r,onFakeSuccess:l,disableDefaultError:d,enableButtonTimeout:c})=>{let h;const g=o()();window._submitMap||(window._submitMap={}),window._submitMap[g]={};try{if(t){if(t.attr("disabled"))return;t.attr("disabled",!0),t.addClass("is-disabled")}c&&(h=setTimeout((()=>{t&&(t.removeAttr("disabled"),t.removeClass("is-disabled")),l&&l(g),h=null}),c));const o=await e(),{success:f,error:u,notification:p,id:m,ids:b,failedWallets:w}=o,y=b||[m];if(t&&(t.removeAttr("disabled"),t.removeClass("is-disabled")),n&&n({...o,requestId:g}),h&&clearTimeout(h),o&&o.ignored)return o;if(f){let t;return s&&(t=s({...o,requestId:g,timer:h})),p&&("string"===typeof p?y.forEach((t=>{(0,a.ag)({message:p,id:t})})):"object"===typeof p&&Object.entries(p).forEach((([t,e])=>{if(e){const s=window._genWallets?.find((({generated_wallet:e})=>e===t))?.name||(0,i.Wr)(t);(0,a.ag)({message:`${s} - ${e}`})}}))),t}if(d||(w&&w.length>0?(0,i.Xe)(w):(y.forEach((t=>{(0,a.F8)({message:u||i18n.t("notification.error"),id:t})})),u&&(0,i.Im)(y)&&(0,a.F8)({message:u,timeout:2e3}))),r)return r({...o,requestId:g})}catch(f){logger.error(f),h&&clearTimeout(h),window._submitMap&&delete window._submitMap[g],n&&n({requestId:g}),(0,a.F8)({message:i18n.t("notification.error")}),t&&(t.removeAttr("disabled"),t.removeClass("is-disabled")),r&&r(f)}};async function l({url:t,data:e={},method:s="POST",...a}){await r({...a,request:()=>fetch(t,{method:s,headers:{"X-CSRF-Token":(0,i.PE)(),"Content-Type":"application/json"},body:JSON.stringify(e)}).then((t=>t.json()))})}},37726:function(t,e,s){s.d(e,{A:function(){return d},Q:function(){return o}});var i=s(5479),a=s.n(i),n=s(81580);a()(document).on("click",".js-dropdown__close",(function(t){o(a()(this).closest(".js-dropdown"))})),a()(document).on("click touchstart",(t=>{a()(".js-dropdown__toggle").each((function(){const e=a()(this),s=a()(this).closest(".js-dropdown").find(".js-dropdown__popup"),i=e.add(s);e.hasClass("is-active")&&!a()(t.target).closest(i).length&&(i.removeClass("is-active"),a()(document).trigger("dd:toggle",[{$element:a()(this).closest(".js-dropdown"),active:!1}]))}))}));const o=async(t,e)=>{const s=t.find(".js-dropdown__toggle"),i=(t.find(".js-dropdown__popup"),t.find(".js-dropdown__toggle, .js-dropdown__popup")),n=(t.find(".c-dropdown__popup__inner.c-dropdown__list"),e||s.hasClass("is-active"));a()(".js-dropdown__toggle, .js-dropdown__popup").removeClass("is-active"),i.toggleClass("is-active",!n)},r=async(t,e)=>{const s=a()(t.target).closest(".js-dropdown");await o(s,e),a()(document).trigger("dd:toggle",[{$element:s,active:s.find(".js-dropdown__toggle").hasClass("is-active")}])},l=t=>(t.preventDefault(),t.stopPropagation(),r(t),!1);function d(){const t=".js-dropdown.js-dropdown--onhover .js-dropdown__toggle, .js-dropdown.js-dropdown--onhover .js-dropdown__popup";/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)?(a()(document).off("click.dropdown",".js-dropdown__toggle"),a()(document).on("click.dropdown",".js-dropdown__toggle",l)):(a()(document).off("click.dropdown",".js-dropdown .js-dropdown__toggle"),a()(document).on("click.dropdown",".js-dropdown .js-dropdown__toggle",(t=>{if(!a()(t.target).closest(".js-dropdown").hasClass("is-disabled"))return a()(t.target).is("a")&&a()(t.target).attr("href")?window.location.assign(a()(t.target).attr("href")):(t.preventDefault(),t.stopPropagation()),r(t),!1})),a()(document).off("mouseenter.dropdown",t),a()(document).off("mouseleave.dropdown",t),a()(document).on("mouseenter.dropdown",t,(t=>{r(t,!1)})),a()(document).on("mouseleave.dropdown",t,(t=>{r(t,!0)}))),a()(document).off("click.dropdown",".js-dropdown__item"),a()(document).on("click.dropdown",".js-dropdown__item",(function(t){if(r(t,!1),a()(this).hasClass("is-selectable")){a()(this).closest(".js-dropdown__popup").find(".js-dropdown__item").removeClass("is-selected");const t=a()(this).data("label")||a()(this).data("value");let e;e=a()(this).find(".js-dropdown__item__template").length?a()(this).find(".js-dropdown__item__template").html():(0,n.gD)(t)?a()(this).html():t,a()(this).closest(".js-dropdown").find(".js-dropdown__label").html(e).attr("data-value",a()(this).attr("data-value")).trigger("change"),a()(this).addClass("is-selected")}if(!a()(this).is("a")||!a()(this).attr("href"))return t.preventDefault(),t.stopPropagation(),!1}))}},64891:function(t,e,s){s.d(e,{A:function(){return N}});var i=s(87816);class a{constructor(t,e){const s={debug:!0,type:"",...e};this.config={...s,...t},this.logger=(0,i.h)(this.config.debug),this.error=(0,i.h)(!0,"error")}}class n{#t;constructor(t){try{const e={};this.config={...e,...t},this.setContainer(this.config.selector),this.render()}catch(e){logger.error(e)}}render(){const{items:t,loggedOutItems:e,name:s,initValue:i}=this.config;this.#t&&this.#t.remove(),this.#t=createFiltersBar(null,t,{initValue:i,loggedOutItems:e,name:s}),this.$btns=this.#t.find(`[data-${s}`);const a=this.setActive.bind(this);this.$btns.on("click",(function(t){a($(this).data(s),t)})),$(".js-index-table__filters-placeholder").addClass("u-d-none"),$(".js-index-table__filters-placeholder").html(""),this.container.append(this.#t)}setActive(t,e,{skipHandler:s}={}){if(!this.#t)return;const{name:i,onSelect:a,tableId:n}=this.config,o=this.$btns.filter(`[data-${i}="${t}"]`);o.hasClass("is-active")||(o.hasClass("is-disabled")?s||loggedOutCb():(this.$btns.removeClass("is-active"),o.addClass("is-active"),a&&!s&&(a(e,{element:o,value:o.data(i),name:i},this),$(document).trigger("sortTable:action",[{tableId:n,action:"setFilter",value:{element:o,value:o.data(i),name:i}}]))))}setContainer(t){this.container=("string"===typeof t?$(t):t).first()}}var o=s(5479),r=s.n(o),l=s(75793);class d extends a{#e;#s;constructor(t){try{const e={tableId:null,actionCable:null,floorActionCable:null,source:"",initLoading:!1,onLoadError:()=>{},onLoad:()=>{},getParams:()=>{},params:{},initValue:null,type:"",onItemLiveUpdate:null,onDataSorted:null,onLoadingChange:null,onIdleTime:null,onDataLoaded:null,state:null,ajaxFilters:null,disableDataLoading:!1,syncWithTypes:null,preprocessLoadData:null,...i.iH};super((0,i.mF)(t,e),e),this.#e=this.config.initLoading,this.page=1,Array.isArray(this.config.syncWithTypes)&&r()(document).on("sortTable:action",((t,{tableId:e,action:s,value:i})=>{this.config.syncWithTypes.includes(e)&&("setLoading"===s&&this.setLoading(i),"dataLoaded"===s&&this.config.onDataLoaded&&this.config.onDataLoaded(i))}))}catch(e){logger.error(e)}}setLoading(t){this.#e=!!t,this.config.onLoadingChange&&this.config.onLoadingChange(this.#e)}get isLoading(){return this.#e}getSource(t){if(!this.config.source)return void this.error(new Error("Source is not defined"));const e=this.config.source.split("?");if(this.config.getSource)return this.config.getSource();const s=this.getLoaderParams(t);return`${e[0]}?${l.A.stringify(s)}`}getLoaderParams(t){const e=this.config.source.split("?");let s={...l.A.parse(e[1]),...this.config.state.params,...this.config.getParams?this.config.getParams():void 0,...t};return s=Object.entries(s).reduce(((t,[e,s])=>({...t,[e]:Array.isArray(s)?s.join(","):s})),{}),s}async load(t,e={}){try{const{onDataLoaded:s,source:i,tableId:a,preprocessLoadData:n}=this.config;if(!i)return;const{append:o}=e;if(o||(this.page=1),this.isLoading)return;r()(".js-index-placeholder-table").addClass("u-d-none").html(""),o||this.setLoading(!0),r()(document).trigger("sortTable:action",[{tableId:a,action:"setLoading",value:!0}]);let l,d=this.getSource(t);if("localhost:3000"===window.location.host){let t={method:"GET",mode:"cors",cache:"no-store"};l=await fetch(d,t).then((t=>t.json()))}else l=await fetch(d,{cache:"no-store"}).then((t=>t.json()));return n&&(l=n(l)),r()(document).trigger("sortTable:action",[{tableId:a,action:"dataLoaded",value:l}]),s&&s(l,e),r()(document).trigger("table:load",[{data:l,tableId:a}]),this.setLoading(!1),r()(document).trigger("sortTable:action",[{tableId:a,action:"setLoading",value:!1}]),this.data}catch(s){this.setLoading(!1),this.error(s),this.config.onLoadError(s)}}}var c=s(81580),h=s(20633),g=s.n(h),f=s(72548);const u=({innerContent:t,className:e="",id:s}="")=>`\n      <div data-cell-id="${s}" class="${e||""}">\n        ${t||""}\n      </div>\n    `,p=({link:t,innerContent:e,data:s,trClassName:i,getRowClass:a,rowId:n,disableTargetBlank:o,sortId:r})=>{const l=t?"a":"div";return`\n      <${l}\n        class="${i||""} ${a?a(s):""}"\n        ${t?`href="${t}" ${o?"":'target="_blank"'}`:""}\n        data-row="true"\n        data-row-id="${n}"\n        ${r?`data-sort-id="${r}"`:""}\n      >\n        ${e||""}\n      </${l}>\n    `};class m extends a{#i;#a;constructor(t,e){try{const s={isSkeleton:!1,tableId:"",container:null,cellProps:{},tableHeaders:[],type:"",bodyContainer:null,trClassName:"",tdClassName:"",disableRender:!1,diffFilters:null,state:null,onRowRender:null,rowIndex:null,onRowClick:null,getRowLink:t=>(0,c.VV)(t.address),disableRowLink:!1,getRowClass:null,disableTargetBlank:!1};super((0,i.mF)(e,s),s),this.rowId=t,this.updateHtml()}catch(s){logger.error(s)}}updateHtml(){const{tableHeaders:t,isSkeleton:e,trClassName:s,getRowClass:i,disableTargetBlank:a}=this.config,n=t.map((({renderCell:t,id:s,pauseCell:i})=>{const a=e?f._1:t;return u({innerContent:a(this.data,{config:this.config}),id:s,className:`${this.config.tdClassName} ${i?"js-grid-table__pause":""}`})})).join("");return this.#i=p({innerContent:n,link:this.config.disableRowLink?void 0:this.config.getRowLink(this.data),data:this.data,trClassName:s,getRowClass:i,rowId:this.rowId,disableTargetBlank:a,sortId:this.data.sortId}),this.element}get element(){return this.#i}get data(){return this.rowId?this.config.state.getRowDataById(this.rowId):{}}}var b=s(28951);class w extends a{#n;#o;#r;#l;#d;#c;#h;#g;#f;constructor(t){try{const e={container:null,data:null,onThClick:null,tableHeaders:[],type:"",tableId:"",idKey:"id",pageType:null,pageSize:null,skeletonPageSize:0,cellRenderProps:null,initOrder:null,onSortStateUpdate:null,maxVisibleCount:null,containerClassName:"c-grid-table",headClassName:"c-grid-table__head",bodyClassName:"c-grid-table__body",scrollClassName:"c-grid-table__scroll",thClassName:"c-grid-table__th",trClassName:"c-grid-table__tr",tdClassName:"c-grid-table__td",pageLoaderClassName:"c-grid-table__page-loader js-indx-table__page-loader",emptyClassName:"c-grid-table__empty",skeletonClassName:"c-grid-table__skeleton",loadingClassName:"is-loading",noEmptyHeader:!1,hideHeader:!1,state:null,emptyPlaceholder:null,diffFilters:null,showPagination:!1,onRowRender:null,onRowClick:null,getRowClass:null,hidePlaceholder:!1,renderPlaceholder:null,disableTargetBlank:!1,disableInfiniteScroll:!1,getRowLink:t=>(0,c.VV)(t.address),disableRowLink:!1,disableMobileView:!1,withPause:!1,disableBodyPause:!1};super((0,i.mF)(t,e),e),this.#l=[],this.setContainer(this.config.container),this.initLayout()}catch(e){logger.error(e)}}getRowsHtml(t=[]){return t.map((t=>t.element)).join("")}initSkeleton(){const{skeletonPageSize:t}=this.config;this.#d=r()("<div></div>").addClass(this.config.skeletonClassName);const e=t||this.config.state.pageSize||0,s=[];for(let i=0;i<e;i++)s.push(new m(null,{cellProps:{className:this.config.tdClassName},isSkeleton:!0,...this.config}));this.#d.append(this.getRowsHtml(s))}setLoading(t){this.#n&&this.#n.toggleClass(this.config.loadingClassName,!!t)}initLayout(){const{containerClassName:t,headClassName:e,thClassName:s,tableHeaders:a,bodyClassName:n,scrollClassName:o,onThClick:l,onSortStateUpdate:d,state:h,emptyPlaceholder:g,emptyClassName:f,hideHeader:u,pageLoaderClassName:p,hidePlaceholder:m,renderPlaceholder:w,noEmptyHeader:y,withPause:_,disableBodyPause:v}=this.config,I=h.sortOrder;this.destroy(),this.#o=u?null:r()("<div></div>").addClass(e),this.#f=r()("<div></div>").addClass(o),this.#r=r()('<div class="c-sortable"></div>').addClass(n),this.#c=r()("<div></div>").addClass(f),this.#h=r()("<div></div>").addClass(p),_&&!v&&this.#f.addClass("js-grid-table__pause"),this.#c.append(w?w():(0,i.mr)({tableId:this.config.tableId,tablePlaceholderUrl:g})),this.#o&&!u&&a.forEach((t=>{const{sortable:e,orderParam:i,orderRequestKey:a,clientSort:n,id:o}=t,c="function"===typeof t.label?t.label():t.label,h=r()("<div></div>").addClass(s).attr("data-cell-id",o).append(c);e&&(h.attr("data-sortable",e),I&&i&&I.name===i&&h.attr("data-order",I.value)),this.#o.append(h);const g=this.#o;if(h.on("click",(function(s){if(e){if(r()(s.target).closest(".js-grid-table__toggle").length)return;const e=r()(this).attr("data-order");g.find("[data-sortable]").removeAttr("data-order");const i=e&&"asc"!==e?"asc":"desc";r()(this).attr("data-order",i),d&&d({name:t.orderParam,label:t.label,orderRequestKey:a,value:i,clientSort:n})}l&&l(s,{$element:r()(this),data:t})})),t.tooltip){const e=r()(`\n            <div\n              class="c-icon c-icon--3xs c-icon--info c-bg-info-icon u-ml-3xs"\n              ${"function"!==typeof t.tooltip?`data-tippy-content="${t.tooltip}"`:""}\n            ></div>\n          `);h.append(e);const s={theme:"astro2",allowHTML:!0,onShow(e){"function"===typeof t.tooltip&&e.setContent(t.tooltip(e.reference))}};(0,b.Ay)(e[0],s)}})),this.initSkeleton(),this.#n.addClass(t).attr("data-table-id",this.config.tableId),(0,c.rr)()&&!this.config.disableMobileView&&this.#n.attr("data-is-mobile",!0),this.#o&&!u&&this.#n.append(this.#o),this.#n.append(this.#f),y&&this.#n.addClass("no-e-header"),this.#f.append(this.#d).append(this.#r),m||this.#f.append(this.#c),this.#f.append(this.#h)}getRestrictedRowElements(){let t=this.#l.map((t=>t.element));const e=this.config.state.maxVisibleCount;return"number"===typeof e&&t.length>e&&(t=t.slice(0,e)),t}recheckEmptyState(){this.config.state.pause||this.#n.toggleClass("is-empty",!this.#r.children().length)}refreshTBody(){if(this.config.state.pause)return;this.rows||this.tbody.empty();const t=this.getRestrictedRowElements().join("");this.tbody.html(t),this.recheckEmptyState()}appendRows(t){if(this.config.state.pause)return;let e=t.map((t=>t.element)).join("");this.tbody.append(e),this.recheckEmptyState()}refreshAllRows(){this.renderRows(this.config.state.rowIds)}renderRows(t,{append:e}={}){if(!this.#r)return void this.error("Body not defined");const s=t.map((t=>this.createRow(t,{})));e?(this.#l=[...this.#l||[],...s],this.appendRows(s)):(this.#l=s,this.refreshTBody()),this.recheckEmptyState()}getRowElement(t){return this.tbody.find(`>[data-row-id="${t}"]`)}getRowElements(){return this.tbody.find(">[data-row-id]")}getRowElementsLength(){return this.config.pause?this.#l.length:this.getRowElements().length}cleanupRowTooltips(t){t.find("[data-tippy-content]").each((function(){r()(this)[0]._tippy&&r()(this)[0]._tippy.destroy()}))}removeRowElementById(t){if((0,c.gD)(t))return void logger.error("removeRowById: rowId not defined");const e=this.rows.findIndex((e=>e.rowId===t));if(-1!==e&&this.#l.splice(e,1),this.config.state.pause)return;const s=this.getRowElement(t);this.cleanupRowTooltips(s),s.remove(),this.recheckEmptyState()}replaceRowById(t,e){if((0,c.gD)(t)&&logger.error("removeRowById: rowId not defined"),this.config.state.pause)return;const s=this.getRowElement(t);this.cleanupRowTooltips(s),s&&e?s.replaceWith(e):s.remove(),this.recheckEmptyState()}scrollToTop(){(0,c.s2)({selector:this.tbody,offset:-50})}insertRows(t,{type:e="prepend"}={}){if(Array.isArray(t)||logger.error("appendRows: incorrect rowIds"),!t.length)return;const{maxVisibleCount:s}=this.config,i=this.config.state.pause;let a=t;if(s&&"prepend"===e){const t=this.getRowElementsLength();t+a.length>s&&(this.#l=this.#l.slice(0,t-a.length),a=a.slice(0,s),i||this.getRowElements().filter(`:gt(${t-a.length-1})`).remove())}if(i)return;let n="";a.forEach((t=>{const e=((t,{rowId:e,config:s,tableHeaders:i,isSkeleton:a})=>{const n=i.map((({renderCell:e,id:i})=>{const n=a?f._1:e;return u({innerContent:n(t,{config:s}),id:i,className:s.tdClassName})})).join("");return p({innerContent:n,link:s.disableRowLink?void 0:s.getRowLink(t),data:t,trClassName:s.trClassName,getRowClass:s.getRowClass,rowId:e,disableTargetBlank:s.disableTargetBlank,sortId:t.sortId})})(this.config.state.dataById[t],{rowId:t,config:this.config,tableHeaders:this.config.tableHeaders});n+=e})),"prepend"===e?this.tbody.prepend(n):this.tbody.append(n),this.recheckEmptyState()}insertRowById(t){(0,c.gD)(t)&&logger.error("removeRowById: rowId not defined");const{disableInfiniteScroll:e,maxVisibleCount:s,pageSize:i}=this.config;this.removeRowElementById(t);const a=this.config.state.rowIds.findIndex((e=>t.toString()===e.toString())),n=this.createRow(t),o=this.getRowElements(),r=a<this.config.state.rowIds.length-1,l="number"===typeof s&&this.getRowElementsLength()===s,d=this.config.state.pause;if(0===a)d||this.tbody.prepend(n.element),this.#l=[n,...this.#l],l&&!d&&this.getRowElements().last().remove();else if(!i||r||this.config.state.rowIds.length<i||e)if(r){const t=i&&this.getRowElementsLength()%i===0;d||o.filter(`:nth-child(${a})`).after(n.element),this.#l=[...this.#l.slice(0,a),n,...this.#l.slice(a)];const s=i&&!e&&this.config.state.rowIds.length>i&&t&&this.#l.length%i!==0;if(l||s)if(d){if(this.#l.length){const t=this.#l[this.#l.length-1].rowId;t&&this.config.state.removeDataById(t,!0)}}else{const t=this.getRowElements().last();if(t.length){const e=t.data("rowId");t.remove(),this.config.state.removeDataById(e,!0)}}}else this.#l.push(n),l||d||this.tbody.append(n.element);this.recheckEmptyState()}createRow(t,e={}){return new m(t,{cellProps:{className:this.config.tdClassName,renderProps:this.config.cellRenderProps},...this.config})}destroy(){this.#n.empty().removeClass(this.config.containerClassName)}setContainer(t){this.#n=("string"===typeof t?r()(t):t).first()}get rows(){return this.#l}get tbody(){return this.#r}get table(){return this.#n}get scroll(){return this.#f}get pageLoader(){return this.#h}}var y=s(59955);class _ extends a{constructor(t){try{const e={actionCable:null,floorActionCable:null,source:"",initLoading:!1,onLoadError:()=>{},onLoad:()=>{},getParams:()=>{},params:{},initValue:null,onItemLiveUpdate:null,onDataSorted:null,onLoadingChange:null,idKey:"id",type:"",filterDataLoadItem:null,pageType:null,pageSize:i.RN,maxVisibleCount:null,...i.iH,setData:()=>{},onDataSet:null,onParamUpdate:null,initPeriod:null,initOrder:null,onDataItemUpdate:null,disableTxs:!1,recalculateTxs:!1,processDataItem:null,directAppend:!1};super((0,i.mF)(t,e),e);const s=this.config,a=s.initOrder?{order_by:s.initOrder.orderRequestKey,order_dir:s.initOrder.value}:{};this.state={rowIds:[],dataById:{},data:[],sortOrder:s.initOrder,pageSize:this.config.pageSize,maxVisibleCount:this.config.maxVisibleCount,pause:!1,params:{...a,...this.config.params},get period(){return this.params.period}}}catch(e){logger.error(e)}}setData(t,{append:e}={}){const{onDataSet:s,disableTxs:a,recalculateTxs:n,filterDataLoadItem:o}=this.config;if(!t)return void this.error("No data for TableData");let{data:r,...l}=t,d=[];o&&(r=r.filter((t=>o(t,{state:this,config:this.config})))),this.state=(0,y.jM)(this.state,(t=>{t.params={...t.params,...l},e||(t.dataById={});return this.processData(r,t.params,{calculatePrev:!0,disableTxs:a,recalculateTxs:n}).forEach((e=>{t.dataById[(0,i.HP)(e,this.getIdKey())]=e})),d=r.map((t=>(0,i.HP)(t,this.getIdKey()))),t.rowIds=e?[...new Set([...t.rowIds,...d])]:d,t})),this.sortTableData(),s&&s(this,{append:e,newRowIds:d})}processDataItem(t){const{processDataItem:e}=this.config,s=t.id||(0,i.fs)(),a=t.attributes?{...t.attributes,id:s}:t;return e?e(a):a}processData(t,e,{calculatePrev:s,disableTxs:i,recalculateTxs:a}={}){return(0,y.jM)(t,(t=>t.map((t=>this.processDataItem(t)))))}sortDataIds(t){const e=this.getIdKey(),{sortOrder:s}=this.state;if(s){const a="desc"===s.value;return Object.values(t).sort((function(t,n){const o=parseFloat(g()(t,s.name))||0,r=parseFloat(g()(n,s.name))||0,l=(0,i.HP)(t,e),d=(0,i.HP)(n,e);return a?r===o?d-l:r-o:o===r?l-d:o-r})).map((t=>(0,i.HP)(t,e)))}}sortTableData(){const{onDataSorted:t}=this.config,{sortOrder:e}=this.state;e&&(this.state=(0,y.jM)(this.state,(t=>{t.rowIds=this.sortDataIds(t.dataById)})),t&&t(this.state.rows))}setParam(t){const e=t||{},s=Object.entries(e);s.length&&(this.state=(0,y.jM)(this.state,(t=>{s.forEach((([e,s])=>{(0,c.gD)(s)||""===s?delete t.params[e]:t.params[e]=s}))})),this.config.onParamUpdate&&this.config.onParamUpdate(e,this))}setOrder(t){const e=t||{};this.state=(0,y.jM)(this.state,(t=>{t.sortOrder=e})),this.setParam({order_by:e.orderRequestKey,order_dir:e.value})}setPause(t){this.state=(0,y.jM)(this.state,(e=>{e.pause=t||!1}))}removeDataById(t,e){const{onDataItemUpdate:s}=this.config;t&&(this.state=(0,y.jM)(this.state,(e=>(delete e.dataById[t],e))),this.sortTableData(),s&&!e&&s({id:t,action:"remove"}))}appendDataBucket(t){const{onDataItemUpdate:e}=this.config;if(!t||!t.length)return;const s={},a=[];t.forEach((t=>{const e=(0,i.HP)(t,this.getIdKey());s[e]=this.processDataItem(t),a.push(e)})),this.state=(0,y.jM)(this.state,(t=>(t.dataById={...t.dataById,...s},t))),e&&e({id:a,action:"add",direct:this.config.directAppend})}setDataById(t,e){const{onDataItemUpdate:s}=this.config;!(0,c.gD)(t)&&e?(this.state=(0,y.jM)(this.state,(s=>(s.dataById[t]=this.processDataItem(e),s))),this.sortTableData(),s&&s({id:t,action:"add"})):logger.error("setDataById error: ",t,e)}getIdKey(){return this.config.idKey}get pause(){return this.state.pause}get rowIds(){return this.state.rowIds}get rows(){return(0,y.jM)(this.state,(t=>t.rowIds.reduce(((t,e)=>this.state.dataById[e]?[...t,this.state.dataById[e]]:t),[])))}get params(){return this.state.params}get sortOrder(){return this.state.sortOrder}get sortOrderDir(){return this.sortOrder?this.sortOrder.value:"desc"}get dataIds(){return Object.entries(this.state.dataById).filter((([t,e])=>!!e)).map((([t])=>t))}get dataById(){return this.state.dataById}setDataByIdState(t){this.state=(0,y.jM)(this.state,(e=>{e.dataById=t}))}get pageSize(){return this.state.pageSize}get maxVisibleCount(){return this.state.maxVisibleCount}setMaxVisibleCount(t){logger.log("maxVisibleCount setter",t),this.state.maxVisibleCount=t}getRowDataById(t){return this.state.dataById[t]}}var v=s(48073);class I extends a{constructor(t){try{const e={container:void 0,onDataLoaded:null,pageLoader:null,pageSize:100,loader:null,root:null,usePageParam:!1,getRows:()=>{},getPath:()=>{},preload:!1};super((0,i.mF)(t,e),e),this.init()}catch(e){logger.error(e)}}async loadNextPage(t){const{usePageParam:e,pageSize:s,loader:i,getRows:a}=this.config;if(e)"number"===typeof t?this.page=t:this.page+=1,await i.load({page:this.page},{append:!0});else{const t=a().length;await i.load({size:s,offset:t},{append:!0})}}async init(){if(this.inited)return;const{container:t,onDataLoaded:e,getPath:s,pageSize:i,pageLoader:a,loader:n,root:o,usePageParam:l,preload:d}=this.config;if(this.inited=!0,!t)return;this.$container="string"===typeof t?r()(t):t,this.page=1;const c={root:o,rootMargin:"0px 0px 1px 0px",threshold:1};d&&await this.loadNextPage(1),this.observer=new IntersectionObserver((async t=>{t.forEach((async t=>{t.isIntersecting&&await this.loadNextPage()}))}),c),this.observer.observe(a[0])}destroy(){this.inited&&(this.observer.unobserve(this.config.pageLoader[0]),this.observer=null,this.page=1,this.inited=!1)}}var C=s(77810);class j extends a{constructor(t){try{const e={actionCable:null,channelName:"DiscoverLpChannel",onLiveUpdate:null,onIdleTime:null,type:"",pageType:"",state:null,disableTxs:!1,recalculateTxs:!1,preprocessLiveData:null,preprocessLiveDataItem:null,filterLiveData:null,tableId:void 0,disableDataLoading:!1,disableInfiniteScroll:void 0,idKey:"id",replaceAllDataOnLive:!1,actionCableEnabled:!0,liveQueueTime:800,directAppend:!1,renderer:null,maxVisibleCount:null};super((0,i.mF)(t,e),e),this.processLiveData=this.processLiveData.bind(this),this.initActionCable(),this.queue=[]}catch(e){logger.error(e)}}initActionCable(t){this.actionCable&&(this.actionCable.unsubscribe(this._handler),clearInterval(this.actionCableTimer)),this.actionCable=t||this.config.actionCable||new C.A({channelName:this.config.channelName},this.config.actionCableEnabled),this._handler=t=>this.addLiveDataToQueue(t),this.actionCable.subscribe(this._handler),this.actionCableTimer=setInterval((()=>{this.queue.length&&(this.processLiveData(this.queue),this.queue=[])}),this.config.liveQueueTime),this.processLiveData}addLiveDataToQueue(t){const{tableId:e,replaceAllDataOnLive:s,preprocessLiveData:i}=this.config,a=this.config.state;let n=t[e];if(!n)return;if(n=i?i(n,{state:a}):n,!this.config.state)return;let o=n.data;this.queue=s?o:[...this.queue,...o]}processLiveData(t){if(window.stopLiveData)return;const{onLiveUpdate:e,replaceAllDataOnLive:s,directAppend:i,renderer:a,maxVisibleCount:n}=this.config,o=this.config.state.sortOrderDir,r=a.getRowElements().length;if(t&&t.length)if(s)this.config.state.setData({data:t});else if(i){if(!0){let e="desc"===o?t.reverse():t;"asc"===o&&n&&(e=e.slice(0,Math.max(n-r,0))),e&&this.config.state.appendDataBucket(e)}else this.defaultProcessor(t)}else this.defaultProcessor(t);e&&e({data:t})}defaultProcessor(t){const{idKey:e,filterLiveData:s,disableDataLoading:a,disableInfiniteScroll:n,state:o}=this.config;let r={};t.forEach((t=>{t.id||(t.id=(0,i.fs)());const s=(0,i.HP)(t,e);r[s]=t})),Object.values(r).forEach((t=>{let r=t;r.id||(r.id=(0,i.fs)());const l=(0,i.HP)(r,e),d=r.attributes||r,c=d.action;if("overwrite"===c&&this.config.state.dataById[l]){const{action:t,...e}=d;r.attributes={...this.config.state.dataById[l],...e}}if(o.removeDataById(l),(!s||s(r,{state:this.config.state,config:this.config}))&&"remove"!==c){if(o.getRowDataById(l)||a)this.config.state.setDataById(l,r);else{const t=(0,y.jM)(this.config.state.dataById,(t=>{const e=this.config.state.processDataItem(r);return t[l]=this.config.preprocessLiveDataItem?this.config.preprocessLiveDataItem(e):e,t})),e=this.config.state.sortDataIds(t);if(e){const t=e.indexOf(l);(-1===t||t<e.length-1||this.config.state.dataIds.length<this.config.state.pageSize||n)&&this.config.state.setDataById(l,r)}}}})),r=null}clearIdleTimer(){clearInterval(this.timer),clearTimeout(this.startTimer)}setIdleTimer(){if(this.clearIdleTimer(),!this.config.onIdleTime)return;((t,e)=>{let s=new Date,i=e-s%e;this.startTimer=setTimeout((()=>{t(),this.timer=setInterval(t,e)}),i)})((()=>{this.config.onIdleTime()}),6e4)}}var k=s(73435),S=s(49935),x=s(20844),D=s.n(x);s(37726);const L=(t,e)=>{t&&t.each((function(){const t=r()(this).data("name"),s=r()(this).find("[data-toggle]");s.on("click",(function(){r()(this).hasClass("is-selected")||(s.removeClass("is-selected"),r()(this).addClass("is-selected"),e&&e({name:t,value:r()(this).data("toggle")}))}))}))},P=(t,e,s="discover")=>{t&&t.each((function(){const t=r()(this).find(".js-indx-filters__switch__toggle"),i=r()(this).find(".js-indx-filters__switch__field");t.on("change",(function(){const a=r()(this).is(":checked");a?i.removeAttr("disabled").closest(".c-field").removeClass("is-disabled"):i.attr("disabled",!0).closest(".c-field").addClass("is-disabled"),e&&e(i.attr("name"),a);let n={filters:{}},o=t.attr("data-kind");n.filters[o]=a,fetch(`/api/${s}/update_filters`,{method:"POST",headers:{"x-csrf-token":(0,c.PE)(),"content-type":"application/json"},body:JSON.stringify(n),credentials:"same-origin"}).then((t=>t.json()))}))}))};class T{constructor(t){try{const e={container:null,onFilterChange:null,onToggleChange:null};this.config={...e,...t};const{container:s}=this.config;this.container="string"===typeof s?r()(s):s,this.$dd=this.container.find(".js-indx-filters__dd"),this.$mainDd=this.container.find(".js-indx-filters__dd"),this.$groups=this.container.find(".js-indx-filters__more"),this.$reset=this.container.find(".js-indx-filters__reset"),this.$apply=this.container.find(".js-indx-filters__apply"),this.initLayout()}catch(e){logger.error(e)}}initLayout(){const{onFilterChange:t,onToggleChange:e,apiPrefix:s}=this.config,i=this.container.find('[data-input="toggle"]'),a=this.container.find(".js-indx-filters__switch"),n=this;P(a,e,s),((t="discover")=>{const e=`/api/${t}/update_filters`;r()(".js-with-liq-filter").on("click",(function(t){let s={filters:{pair_kind:r()(t.currentTarget).attr("data-kind")}};fetch(e,{method:"POST",headers:{"x-csrf-token":(0,c.PE)(),"content-type":"application/json"},body:JSON.stringify(s),credentials:"same-origin"}).then((t=>t.json()))})),r()(".js-indx-amount").on("change",(function(t){let s=r()(t.currentTarget),i={filters:{}},a=s.attr("data-kind");i.filters[a]=s.val(),fetch(e,{method:"POST",headers:{"x-csrf-token":(0,c.PE)(),"content-type":"application/json"},body:JSON.stringify(i),credentials:"same-origin"}).then((t=>t.json()))}))})(s),L(i,(e=>{t&&t(e,this.collectFilters(),this.prevFilters),this.prevFilters=this.collectFilters()})),this.prevFilters=this.collectFilters(),this.container.find(".js-indx-filters__reset").on("click",(function(){n._filters=null;const e=r()(this).closest(".js-indx-filters__more");n.$dd.find(".js-indx-filters__input").val(""),e.find(".js-indx-filters__checkbox").prop("checked",e.is("[data-reverse]")),n.saveDDFilters();const s=n.collectFilters();t&&t({},s,n.prevFilters),n.prevFilters=s})),this.container.find(".js-indx-filters__apply").on("click",(function(){n._filters=null,n.$dd.find(".js-dropdown__popup, .js-dropdown__toggle").removeClass("is-active"),n.apply()})),this.container.find(".js-indx-filters__checker").on("change",(function(){n.apply()})),this.container.find(".js-indx-filters__toggle").on("click",(function(){r()("html").addClass("modal-open-mobile"),n._filters=n.collectFilters()}));const o=(0,c.sg)((function(t,{$element:e,active:s}={}){e&&e.find(".js-indx-filters__toggle").length&&!s&&(r()("html").removeClass("modal-open-mobile"),n._filters&&!D()(n._filters,n.collectFilters())&&n.apply())}),100);r()(document).on("dd:toggle",o),this.container.find('[data-input="text"]').on("change",(function(){if(t)return t({name:r()(this).attr("name"),value:r()(this).val()},n.collectFilters())}))}apply(){const{onFilterChange:t}=this.config;this.$groups.each((function(){r()(this).is("[data-reverse]")&&!r()(this).find(".js-indx-filters__checkbox:checked").length&&r()(this).find(".js-indx-filters__checkbox").prop("checked",!0)}));const e=this.saveDDFilters(),s=this.collectFilters();t&&t(e,s,this.prevFilters),this.prevFilters=s}saveDDFilters(){const{apiPrefix:t}=this.config;const e=Object.entries(this.collectFilters()).reduce(((t,[e,s])=>({...t,[e]:Array.isArray(s)?s.join(","):s})),{});return r()("html").removeClass("modal-open-mobile"),fetch(`/api/${t}/update_filters`,{method:"POST",headers:{"x-csrf-token":(0,c.PE)(),"content-type":"application/json"},body:JSON.stringify({filters:e}),credentials:"same-origin"}).then((t=>t.json())),{}}collectFilters(){return this.container.find("[data-input], .js-indx-filters__input, .js-indx-filters__checker").toArray().reduce(((t,e)=>{const s=r()(e).data("input")||r()(e).attr("type");let i,a;if("toggle"===s?(i=r()(e).data("name"),a=r()(e).find("[data-toggle]").filter(".is-selected").data("toggle")):"text"===s||"number"===s?(i=r()(e).attr("name"),a=r()(e).val()):"checkbox"===s&&(i=r()(e).attr("name"),a=r()(e).is(":checked")),i){const e=i.split(".");if(1===e.length)return{...t,[i]:a};const s=e[0],n={...t};return n[s]||(n[s]=[]),a&&n[s].push(e[1]),n}}),{})}}class R{constructor(t){try{const e={container:null,onFilterChange:null,onToggleChange:null};this.config={...e,...t};const{container:s}=this.config;this.container="string"===typeof s?r()(s):s,this.initLayout()}catch(e){logger.error(e)}}initLayout(){const{onFilterChange:t}=this.config,e=this;this.container.find(".js-my-holders__checkbox").on("change",(function(){const s={name:r()(this).attr("name"),value:r()(this).is(":checked")};if(fetch("/api/my_holdings/update_filters",{method:"POST",headers:{"x-csrf-token":(0,c.PE)(),"content-type":"application/json"},body:JSON.stringify({filters:{[s.name]:s.value}}),credentials:"same-origin"}).then((t=>t.json())),t)return t(s,e.collectFilters())}))}collectFilters(){return this.container.find("[data-input]").toArray().reduce(((t,e)=>{const s=r()(e).data("input");let i,a;if("toggle"===s?(i=r()(e).data("name"),a=r()(e).find("[data-toggle]").filter(".is-selected").data("toggle")):"text"===s?(i=r()(e).attr("name"),a=r()(e).val()):"checkbox"===s&&(i=r()(e).attr("name"),a=r()(e).is(":checked")),i)return{...t,[i]:a}}),{})}}class B{constructor(t){try{const e={container:null,onFilterChange:null,onToggleChange:null};this.config={...e,...t};const{container:s}=this.config;this.container="string"===typeof s?r()(s):s,this.initLayout()}catch(e){logger.error(e)}}initLayout(){const{onFilterChange:t}=this.config;this.container.find(".js-orders__checkbox").on("change",(()=>{const e=this.collectFilters();if((0,c.Pu)("orders_status",e.orders_status),t)return t(e,e)})),this.container.find("input#orders_current_token").on("change",(e=>{r()(e.currentTarget);const s=this.collectFilters();if((0,c.Pu)("orders_current_token",s.orders_current_token),t)return t(s,s)}))}collectFilters(){const t=[];this.container.find(".js-orders__checkbox").each((function(){r()(this).is(":checked")&&t.push(r()(this).attr("name"))}));let e=this.container.find("input#orders_current_token").prop("checked"),s=(0,v.Lx)();return{orders_status:t,orders_current_token:e,pool_id:s}}}var E=s(6145);class F extends a{constructor(t){try{const e={};super((0,i.mF)(t,e),e),this.initFilters(),this.initBuyBtns(),this.initTimer(),this.initStickyHeader(),this.initPause(),this.initBuyBtnUpdate()}catch(e){logger.error(e)}}initStickyHeader(){const t=r()(".js-index-table"),e=r()(".js-index-table-scroll");e.on("scroll",(()=>{t.toggleClass("is-scrolled",e.scrollLeft()>10)})),r()(window).scroll((function(t){r()(".js-index-table").each((function(){const t=r()(this),e=t.find(".js-grid-table__head--sticky");r()(window).scrollTop()>t.offset().top&&!e.hasClass("is-sticky")?e.addClass("is-sticky"):r()(window).scrollTop()<t.offset().top&&e.hasClass("is-sticky")&&e.removeClass("is-sticky")}))}))}initFilters(){const{tableId:t}=this.config;[i.Ht.discover,i.Ht.trending].includes(t)?(this.filters=new T({container:".js-indx-filters",apiPrefix:t,onFilterChange:(t,e,s)=>{this.config.state.setParam(e),this.config.loader.load();let i=["mint_authority","freeze_authority","top_holders_perc","lp_burned_perc","one_social"].reduce(((t,s)=>t+!!e[s]),!1);const a=["usd_liq","txns","volume","buys","sells","mkt_cap","age"];for(let n=0;n<a.length;n++){const t=a[n];(e[`${t}_from`]||e[`${t}_to`])&&(i+=1)}r()('[data-type="main"] .js-indx-filters__toggle__counter').html(i||""),r()('[data-type="dexes"] .js-indx-filters__toggle__counter').html(e.dexes?e.dexes.length:""),this.config.onFilterChange&&this.config.onFilterChange(e,s)},onToggleChange:(t,e)=>{e?this.config.renderer.table.attr(`data-toggle-${t}`,!0):this.config.renderer.table.removeAttr(`data-toggle-${t}`)}}),r()(".js-indx-filters__switch__toggle[data-kind='quick_buy']").is(":checked")&&this.config.renderer.table.attr("data-toggle-buy",!0),r()(".js-indx-filters__switch__toggle[data-kind='quick_snipe']").is(":checked")&&this.config.renderer.table.attr("data-toggle-snipe",!0)):t===i.Ht.holdings?this.filters=new R({container:".js-holdings-filters",onFilterChange:(t,e)=>{this.config.state.setParam(e),this.config.resetScroll(),this.config.loader.load();const s=[e.with_remainings].reduce(((t,e)=>t+e),!1);r()(".js-my-holders__counter").html(s||"")}}):t===i.Ht.orders&&(this.filters=new B({container:".js-orders-filters",onFilterChange:(t,e)=>{const s=Object.entries(e).reduce(((t,[e,s])=>({...t,[e]:Array.isArray(s)?JSON.stringify(s):s})),{});this.config.state.setParam(s),this.config.resetScroll(),this.config.loader.load();const i=["active","success","failed"].reduce(((t,s)=>t+e.orders_status.includes(s)),!1);r()(".js-orders__counter").html(i||"")}}))}initBuyBtns(){const{tableId:t}=this.config,e=this;r()(document).on("click",".js-indx-filters__preset",(async function(t){const{tableId:e,value:s}=r()(this).data(),a="discoveries"===e?"discover":e;(0,i.p0)({filters:{preset:parseInt(s)}},a)})),r()(document).on("click",".js-indx-table__tr",(async function(s){const i=r()(s.target).closest(".js-indx-table__action-btn");if(i.length){s.stopPropagation(),s.preventDefault();const{poolId:a,actionType:n,socialLink:o}=i.data();if(o)window.open(o,"_blank");else if(n){const s=r()(`.js-indx-amount[name="${n}"]`).val();if((0,c.gD)(s)||""===s)return void(0,k.F8)({message:`Quick ${n} is required`});const{mint_authority:o,freeze_authority:l}=e.filters.collectFilters();await(0,S.N)({$button:i,url:"/api/purchases/hunt ",data:{loc_id:c.Ex[t],amount:s,pool_id:a,preset_id:parseInt(r()(".js-indx-filters__preset.is-selected").data("value")),filters:{mint_authority:o,freeze_authority:l},b:r()("#js-cur-u-bal").text()},onSuccess:t=>{if(!t.ignored)if("snipe"===n)(0,k.ag)({message:i18n.t("notification.task_dashboard"),id:t.id});else{let e=t.ids;e||(0,c.gD)(t.id)||(e=[t.id]);let s=t.successWallets||{};e.forEach((t=>{let e=s[t],i="";if(e){i=`${window._genWallets?.find((({generated_wallet:t})=>t===e))?.name||shortenAddress(e)} - `}(0,k.OA)({message:i18n.t("tr_executing",{prefix:i}),id:t,timeout:c.hj}),(0,E.Xx)(t)})),t.failedWallets&&t.failedWallets.length>0&&(0,c.Xe)(t.failedWallets)}}})}}else{const t=r()(s.target).closest(".js-index-table__pair");t.length&&t.data("address")&&(s.stopPropagation(),s.preventDefault(),(0,c.Dk)(t.data("address")))}}))}initTimer(){const{tableId:t}=this.config,e=this.config.renderer.table;this.timeInterval&&clearInterval(this.timeInterval),this.timeInterval=setInterval((function(){if(r()(".js-indx-table__timer").each((function(){const t=(0,c.Ro)(parseInt(r()(this).data("timestamp")));let e;e="trending"===r()(this).data("type")?(0,c.dm)(t):(0,c.t_)(t),r()(this).text()!==e&&r()(this).html(e)})),[i.Ht.discover].includes(t)&&e){e.find("[data-show-time].is-hidden").each((function(){const t=(0,c.Ro)(parseInt(r()(this).data("showTime"))),e=(new Date).getTime(),s=r()(this).parent().find(".js-action-countdown");t<e?(r()(this).removeAttr("data-show-time").removeClass("is-hidden"),s.remove()):s.find(".js-action-countdown__time").html((0,c.HT)(e,t))}))}}),1e3)}initPause(){const{withPause:t,container:e,state:s,renderer:i}=this.config;let a;!t||(0,c.lb)()||(0,c.rr)()||(e.on("mouseenter",".js-grid-table__pause",(function(){clearTimeout(a),s.pause||s.setPause(!0)})),e.on("mouseleave",".js-grid-table__pause",(function(){clearTimeout(a),a=setTimeout((function(){s.setPause(!1),i.refreshAllRows()}),150)})))}initBuyBtnUpdate(){r()(".js-indx-amount[data-kind='quick_buy_amt']").on("change",(t=>{let e=r()(t.currentTarget).val();e&&!isNaN(e)||(e="0.0",r()(t.currentTarget).val(e)),r()(".js-quick-buy-amt-action").text(e),window.currentQuickBuy=e}))}}class N extends a{constructor(t){try{super(t,{idKey:"id",tableId:null});const e=this;this.container=t.container,this.config.tableId||logger.error("tableId is not defined"),this.tableState=new _({...this.config,initOrder:this.config.initOrder,initPeriod:this.config.initPeriod,onDataSet:(t,{append:s,newRowIds:i}={})=>{const a=t.rowIds;s?e.renderer.renderRows(i,{append:s}):e.renderer.renderRows(a,{append:s}),(0,c.sA)(e.renderer.tbody),this.config.onDataSet&&this.config.onDataSet(t,...restProps)},onDataItemUpdate:({id:t,action:s,direct:i})=>{if(t&&!e.loader.isLoading){const a=Array.isArray(t)?t:[t];if("remove"===s)a.forEach((t=>{e.renderer.removeRowElementById(t)}));else if(i){const t=this.tableState.sortOrderDir;"asc"===t&&this.config.maxVisibleCount&&this.renderer.getRowElements().length>=this.config.maxVisibleCount||(e.renderer.insertRows(a,{type:"desc"===t?"prepend":"append"}),(0,c.sA)(e.renderer.tbody))}else a.forEach((t=>{e.renderer.insertRowById(t)})),(0,c.sA)(e.renderer.tbody)}}});(0,c.sg)((()=>{e.renderer.refreshAllRows()}),500);this.renderer=new w({...this.config,pageSize:this.config.pageSize,onSortStateUpdate:this.onSortStateUpdate.bind(this),state:this.tableState}),this.config.disableLiveData||(this.liveData=new j({...this.config,state:this.tableState,renderer:this.renderer,onLiveUpdate:t=>{this.config.onLiveUpdate&&this.config.onLiveUpdate({...t,renderer:this.renderer,state:this.tableState,container:this.container}),!window.stopLiveData&&this.config.disableLiveData}})),this.config.filters&&(this.filters=new n({...this.config.filters,initValue:this.config.initPeriod,tableId:this.config.tableId,onSelect:async(t,{value:s,name:i},a)=>{this.config.showPagination?await e.loader.load({[i]:s,page:1}):await e.loader.load({[i]:s});const n=e.tableState.params[i];n&&a.setActive(n,null,{skipHandler:!0})}}));let s=!0;this.loader=new d({...this.config,state:this.tableState,onDataLoaded:(...t)=>{this.onDataLoadedCb(...t),s&&this.config.onFirstDataLoaded&&this.config.onFirstDataLoaded(...t),s=!1},onLoadingChange:t=>{e.renderer.setLoading(t)}})}catch(e){logger.error(e)}}onDataLoadedCb(t,{append:e}={}){const s=t,{pageSize:i}=this.config;if(s&&s.data)if(this.infiniteScroll){(i?s.data.length<i:0===s.data.length)&&(logger.log("DESTROY INFINIT SCROLL"),this.infiniteScroll.destroy())}else this.config.disableInfiniteScroll||this.initInfiniteScroll();this.tableState.setData(s,{append:e}),this.config.onDataLoaded&&this.config.onDataLoaded(s,{rawData:t})}initInfiniteScroll(){this.infiniteScroll&&this.infiniteScroll.destroy(),this.infiniteScroll=new I({root:this.config.useInnerScroll?this.renderer.scroll[0]:null,container:this.renderer.tbody,pageLoader:this.renderer.pageLoader,loader:this.loader,state:this.state,usePageParam:this.config.usePageParam,pageSize:this.config.pageSize,getPath:t=>this.loader.getSource(t),getRows:()=>this.renderer.tbody.find(".js-indx-table__tr")})}onSortStateUpdate(t){const{onSortChange:e,pageSize:s}=this.config;this.tableState.setOrder(t),e&&e(t),this.renderer.scrollToTop(),this.infiniteScroll&&(this.infiniteScroll.destroy(),this.infiniteScroll=null),t.clientSort?(this.tableState.sortTableData(),this.renderer.refreshAllRows()):this.loader.load()}async init(t){try{this.tableSideEffectsManager=new F({...this.config,state:this.tableState,container:this.container,loader:this.loader,renderer:this.renderer,resetScroll:()=>{this.infiniteScroll&&(this.infiniteScroll.destroy(),this.infiniteScroll=null)}});const e=this.tableSideEffectsManager.filters;let s={};e&&(s=this.tableSideEffectsManager.filters.collectFilters(),this.tableState.setParam(s)),this.config.disableDataLoading||await this.loader.load({...t,...s}),this.inited=!0}catch(e){this.error(e)}}}}}]);